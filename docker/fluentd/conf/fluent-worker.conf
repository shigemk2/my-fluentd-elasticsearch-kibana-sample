<source>
  @type tail
  path /fluentd/log/application.log
  pos_file /fluentd/buffer/application.log.pos
  format nginx
  tag nginx.access
</source>

<match application.access>
  @type forward
  buffer_type memory
  buffer_chunk_limit 8m
  buffer_queue_limit 64
  flush_interval 1s
  <server>
    host 172.17.0.3
    port 24224
  </server>
  <secondary>
    @type file
    path /fluentd/log/forward-failed
  </secondary>
</match>